@page "/exception"

<PageTitle>Exception Test</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Exception Test</MudText>

<MudButton Disabled="@isProcessing" OnClick="ExecuteAsync" Variant="Variant.Filled" Color="Color.Primary">
    @if (isProcessing)
    {
        <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
        <MudText Class="ms-2">Procesando</MudText>
    }
    else
    {
        <MudText>Ejecutar</MudText>
    }
</MudButton>

@code {
    bool isProcessing = false;

    private async Task ExecuteAsync()
    {
        isProcessing = true;

        StateHasChanged();

        await Task.Delay(1000);

        isProcessing = false;

        StateHasChanged();

        throw new Exception("Excepción del sistema provocada por el usuario de forma manual");
    }
}
